/*! Copyright (c) 2016 THE ULTRASOFT (http://theultrasoft.com)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Project: Parallaxie
 * Version: 0.5
 *
 * Requires: jQuery 1.9+
 */

$(function(  ){

    $.fn.parallaxie = function( options ){

        var options = $.extend({
            speed: 1,
            repeat: 'repeat',
            size: 'cover',
            pos_x: 'left',
            offset: 0,
        }, options );

        this.each(function(){

            var $el = $(this);
            var local_options = $el.data('parallaxie');
            if( typeof local_options != 'object' ) local_options = {};
            local_options = $.extend( {}, options, local_options );
            var image_url = $el.data('image');
            var pos_x =  local_options.offset + ($el.offset().top - $(window).scrollTop()) * (1 - local_options.speed );
            $el.css({
                'transform': 'translate(' + pos_x + 'px, 0)'
            });

            $(window).scroll( function(){
                var pos_x =  local_options.offset + ($el.offset().top - $(window).scrollTop()) * (1 - local_options.speed );
                    $el.data( 'pos_x', pos_x );
                    $el.css( {'transform': 'translate(' + pos_x + 'px, 0)'} );
                }
            );
        });
        return this;
    };
});